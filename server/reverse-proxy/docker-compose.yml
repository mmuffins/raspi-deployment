---
  version: '3.8'
  
  networks:
    default:
      internal: false
      name: reverse-proxy
  services:
    reverse-proxy:
      image: traefik:latest
      restart: unless-stopped
      command:
        #- --log.level=DEBUG
        - -api.insecure=true
        - -providers.docker=true
        - -providers.docker.exposedbydefault=false
        - -entrypoints.web.address=:80
        - --ping=true
      ports:
        - 80:80
        # - 8080:8080
      volumes:
        - /etc/localtime:/etc/localtime:ro 
        - /var/run/docker.sock:/var/run/docker.sock:ro
        # - /home/mmuffins/docker/data/traefik:/etc/traefik
      labels:
        - traefik.enable=true
        - traefik.docker.network=reverse-proxy
        - traefik.http.routers.api.service=api@internal
        - traefik.http.routers.api.rule=Host(`traefik.docker.localhost`)
        - traefik.http.routers.api.entrypoints=web
